node : (node:12508) 
ExperimentalWarning: VM Modules is 
an experimental feature and might 
change at any time
At line:1 char:1
+ node --experimental-vm-modules 
node_modules/jest/bin/jest.js 
tests/ma ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpe 
   cified: ((node:12508) Ex...nge a  
  t any time:String) [], RemoteExc   
 eption
    + FullyQualifiedErrorId : Native 
   CommandError
 
(Use `node --trace-warnings ...` to 
show where the warning was created)
(node:17232) ExperimentalWarning: VM 
Modules is an experimental feature 
and might change at any time
(Use `node --trace-warnings ...` to 
show where the warning was created)
  console.log
    MOCK EMAIL SENDING (Credentials missing):

      at sendEmail (utils/email.js:5:13)

  console.log
    To: donor@test.com

      at sendEmail (utils/email.js:6:13)

  console.log
    Subject: Verify Your Email Address

      at sendEmail (utils/email.js:7:13)

  console.log
    Message: Your verification code is: 1603

      at sendEmail (utils/email.js:8:13)

  console.log
    MOCK EMAIL SENDING (Credentials missing):

      at sendEmail (utils/email.js:5:13)

  console.log
    To: donor@test.com

      at sendEmail (utils/email.js:6:13)

  console.log
    Subject: Verify Your Email Address

      at sendEmail (utils/email.js:7:13)

  console.log
    Message: Your verification code is: 8787

      at sendEmail (utils/email.js:8:13)

  console.log
    MOCK EMAIL SENDING (Credentials missing):

      at sendEmail (utils/email.js:5:13)

  console.log
    To: ngo@test.com

      at sendEmail (utils/email.js:6:13)

  console.log
    Subject: Verify Your Email Address

      at sendEmail (utils/email.js:7:13)

  console.log
    Message: Your verification code is: 8157

      at sendEmail (utils/email.js:8:13)

  console.log
    MOCK EMAIL SENDING (Credentials missing):

      at sendEmail (utils/email.js:5:13)

  console.log
    To: ngo@test.com

      at sendEmail (utils/email.js:6:13)

  console.log
    Subject: Verify Your Email Address

      at sendEmail (utils/email.js:7:13)

  console.log
    Message: Your verification code is: 8572

      at sendEmail (utils/email.js:8:13)

  console.log
    [Notification] To: 698378de01ea3b4901231e21, Msg: New donation available: Heaps of Carrots, Type: donation_created

      at createNotification (utils/notification.js:12:17)

  console.log
    MOCK EMAIL SENDING (Credentials missing):

      at sendEmail (utils/email.js:5:13)

  console.log
    To: vol@test.com

      at sendEmail (utils/email.js:6:13)

  console.log
    Subject: Verify Your Email Address

      at sendEmail (utils/email.js:7:13)

  console.log
    Message: Your verification code is: 3785

      at sendEmail (utils/email.js:8:13)

  console.log
    [Notification] To: 698378dea5e7305f62e87005, Msg: New donation available: Life Saving Food, Type: donation_created

      at createNotification (utils/notification.js:12:17)

  console.log
    [Notification] To: 698378dea5e7305f62e87000, Msg: Your donation "Life Saving Food" has been claimed by FoodBank, Type: donation_assigned

      at createNotification (utils/notification.js:12:17)

  console.log
    [Auto-Dispatch] Dispatching donation 698378dfa5e7305f62e8700e to 1 volunteers.

      at initiateAutoDispatch (controllers/donation.controller.js:524:17)

  console.error
    [Auto-Dispatch] Error: ReferenceError: isTest is not defined
        at C:\Users\hp\23cse311-SurplusLink\backend\controllers\donation.controller.js:528:27
        at Array.forEach (<anonymous>)
        at initiateAutoDispatch (C:\Users\hp\23cse311-SurplusLink\backend\controllers\donation.controller.js:527:28)
        at processTicksAndRejections (node:internal/process/task_queues:103:5)

    [0m [90m 547 |[39m
     [90m 548 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 549 |[39m         console[33m.[39merror([32m'[Auto-Dispatch] Error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 550 |[39m     }
     [90m 551 |[39m }[33m;[39m
     [90m 552 |[39m[0m

      at initiateAutoDispatch (controllers/donation.controller.js:549:17)

  console.log
    [Notification] To: 698378dea5e7305f62e87000, Msg: A volunteer Volunteer is on their way to pick up your donation!, Type: volunteer_accepted

      at createNotification (utils/notification.js:12:17)

  console.log
    [Notification] To: 698378dea5e7305f62e87005, Msg: Volunteer Volunteer has accepted your delivery and is heading to the donor., Type: volunteer_accepted

      at createNotification (utils/notification.js:12:17)

  console.log
    [Notification] To: 698378dea5e7305f62e87005, Msg: Your donation has been picked up by Volunteer and is on the way!, Type: donation_picked_up

      at createNotification (utils/notification.js:12:17)

  console.log
    MOCK EMAIL SENDING (Credentials missing):

      at sendEmail (utils/email.js:5:13)

  console.log
    To: donor@test.com

      at sendEmail (utils/email.js:6:13)

  console.log
    Subject: Verify Your Email Address

      at sendEmail (utils/email.js:7:13)

  console.log
    Message: Your verification code is: 3885

      at sendEmail (utils/email.js:8:13)

  console.log
    [Notification] To: 698378dea5e7305f62e87005, Msg: Volunteer has arrived at your location. Please verify receipt to finalize!, Type: donation_delivered

      at createNotification (utils/notification.js:12:17)

  console.log
    MOCK EMAIL SENDING (Credentials missing):

      at sendEmail (utils/email.js:5:13)

  console.log
    To: donor@test.com

      at sendEmail (utils/email.js:6:13)

  console.log
    Subject: Verify Your Email Address

      at sendEmail (utils/email.js:7:13)

  console.log
    Message: Your verification code is: 6805

      at sendEmail (utils/email.js:8:13)

  console.log
    MOCK EMAIL SENDING (Credentials missing):

      at sendEmail (utils/email.js:5:13)

  console.log
    To: ngo@test.com

      at sendEmail (utils/email.js:6:13)

  console.log
    Subject: Verify Your Email Address

      at sendEmail (utils/email.js:7:13)

  console.log
    Message: Your verification code is: 6447

      at sendEmail (utils/email.js:8:13)

  console.log
    [Notification] To: 698378e001ea3b4901231e3c, Msg: New donation available: Heaps of Carrots, Type: donation_created

      at createNotification (utils/notification.js:12:17)

  console.log
    MOCK EMAIL SENDING (Credentials missing):

      at sendEmail (utils/email.js:5:13)

  console.log
    To: ngo@test.com

      at sendEmail (utils/email.js:6:13)

  console.log
    Subject: Verify Your Email Address

      at sendEmail (utils/email.js:7:13)

  console.log
    Message: Your verification code is: 6393

      at sendEmail (utils/email.js:8:13)

PASS tests/matching.test.js (16.694 
s)
  Intelligent Dispatch - Matching 
Algorithm Tests
    ΓêÜ should rank the closest and 
most capable volunteer at #1 (1847 
ms)
    ΓêÜ should return an empty list 
if no volunteers are online (831 ms)

  console.log
    MOCK EMAIL SENDING (Credentials missing):

      at sendEmail (utils/email.js:5:13)

  console.log
    To: vol@test.com

      at sendEmail (utils/email.js:6:13)

  console.log
    Subject: Verify Your Email Address

      at sendEmail (utils/email.js:7:13)

  console.log
    Message: Your verification code is: 3402

      at sendEmail (utils/email.js:8:13)

  console.log
    [Notification] To: 698378e0a5e7305f62e8703e, Msg: New donation available: Jump Test, Type: donation_created

      at createNotification (utils/notification.js:12:17)

FAIL tests/lifecycle.test.js (17.378 
s)
  Donation Lifecycle Integration 
Tests
    ├ù should follow the full 
lifecycle in strict order: active -> 
assigned -> picked_up -> delivered 
(2213 ms)
    ΓêÜ should reject invalid state 
jumps (e.g., active direct to 
delivered) (1137 ms)

  ΓùÅ Donation Lifecycle Integration 
Tests ΓÇ║ should follow the full 
lifecycle in strict order: active -> 
assigned -> picked_up -> delivered

    expect(received).toBe(expected) 
// Object.is equality

    Expected: "completed"
    Received: "assigned"

    [0m [90m 121 |[39m         exp
ect(deliverRes[33m.[39mstatus)[33m
.[39mtoBe([35m200[39m)[33m;[39m
     [90m 122 |[39m         expect(
deliverRes[33m.[39mbody[33m.[39md
eliveryStatus)[33m.[39mtoBe([32m'd
elivered'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 123 
|[39m         expect(deliverRes[33m
.[39mbody[33m.[39mstatus)[33m.[3
9mtoBe([32m'completed'[39m)[33m;[
39m
     [90m     |[39m                
                        
[31m[1m^[22m[39m
     [90m 124 |[39m     
})[33m;[39m
     [90m 125 |[39m
     [90m 126 |[39m     
it([32m'should reject invalid state 
jumps (e.g., active direct to 
delivered)'[39m[33m,[39m 
[36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> 
(tests/lifecycle.test.js:123:40)

Test Suites: 1 failed, 1 passed, 2 
total
Tests:       1 failed, 3 passed, 4 
total
Snapshots:   0 total
Time:        18.764 s, estimated 27 s
Ran all test suites matching tests/ma
tching.test.js|tests/lifecycle.test.j
s.
